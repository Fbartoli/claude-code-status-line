# Claude Code Status Line

A custom status line indicator for [Claude Code](https://claude.ai/claude-code) that displays real-time session metrics.

![Status Line Example](https://img.shields.io/badge/Opus_4.5-ðŸŸ¢_Ctx:_52%25_|_1Kâ†“_2Kâ†‘_45Kâš¡_|_ðŸ§ _|_$5.57_|_main-blue)

## Features

- **Model indicator** - Shows current Claude model (Opus 4.5, Sonnet 4, Haiku, etc.)
- **Context usage** - Real-time context window percentage with color-coded status
- **Token breakdown** - Inputâ†“, Outputâ†‘, and Cacheâš¡ tokens
- **Thinking indicator** - ðŸ§  appears when extended thinking is active
- **Cost estimation** - Running session cost based on token usage
- **Git branch** - Current branch name

## Screenshot

```
[Opus 4.5] ðŸŸ¢ Ctx: 33% | 916â†“ 195â†‘ 4.2Mâš¡ | ðŸ§  | $9.50 | main
```

### Status Colors

| Icon | Context % | Meaning |
|------|-----------|---------|
| ðŸŸ¢ | < 70% | Healthy |
| ðŸŸ¡ | 70-90% | Warning |
| ðŸ”´ | > 90% | Critical |

## Installation

### Quick Install

```bash
# Clone the repository
git clone https://github.com/your-username/claude-code-status-line.git

# Run the install script
cd claude-code-status-line
./install.sh
```

### Manual Install

1. **Copy the script:**
   ```bash
   mkdir -p ~/.claude/scripts
   cp status-indicator.sh ~/.claude/scripts/
   chmod +x ~/.claude/scripts/status-indicator.sh
   ```

2. **Configure Claude Code** - Add to `~/.claude/settings.json`:
   ```json
   {
     "statusLine": {
       "type": "command",
       "command": "~/.claude/scripts/status-indicator.sh"
     }
   }
   ```

3. **Restart Claude Code** to see the status line.

## Configuration

Edit the script to customize pricing for your model:

```bash
# Pricing per 1M tokens (adjust for your model)
PRICE_INPUT=15.00      # Input tokens
PRICE_OUTPUT=75.00     # Output tokens
PRICE_CACHE_READ=1.50  # Cache read tokens
PRICE_CACHE_WRITE=18.75 # Cache write tokens
```

### Model Pricing Reference

| Model | Input | Output | Cache Read | Cache Write |
|-------|-------|--------|------------|-------------|
| Opus 4.5 | $15 | $75 | $1.50 | $18.75 |
| Sonnet 4 | $3 | $15 | $0.30 | $3.75 |
| Haiku | $0.25 | $1.25 | $0.025 | $0.30 |

## Token Breakdown Legend

| Symbol | Meaning |
|--------|---------|
| `â†“` | Input tokens (sent to Claude) |
| `â†‘` | Output tokens (generated by Claude) |
| `âš¡` | Cache tokens (read + write) |
| `ðŸ§ ` | Extended thinking active |

## Requirements

- Claude Code CLI
- Bash 3.2+ (macOS compatible)
- Git (optional, for branch display)

## How It Works

The script reads Claude Code's session files from `~/.claude/projects/` to extract:

- Token usage from the `usage` field in API responses
- Model information from message metadata
- Thinking mode status from message content types

Cost is calculated by summing all token usage across the session and applying the configured pricing.

## Troubleshooting

**Status line not appearing?**
- Ensure the script is executable: `chmod +x ~/.claude/scripts/status-indicator.sh`
- Check settings.json syntax is valid JSON
- Restart Claude Code

**Shows `[--] Ctx: --%`?**
- No active session found
- Start a new Claude Code session

**Git branch shows `--`?**
- Not in a git repository
- Or git is not installed

## License

MIT License - feel free to modify and share!

## Contributing

Pull requests welcome! Ideas for improvements:

- [ ] Session duration display
- [ ] Message count
- [ ] Customizable format string
- [ ] Multiple model pricing profiles
